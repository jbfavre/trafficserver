Description: change order of libraries so that it's possible to link with
 --as-needed option.
 .
 This patch is supposed to be merged upstream in 3.0.1. Moreover the Makefile.in
 parts can be removed if regenerating those files with `autoreconf -i'. 

Author: Ilya Barygin <barygin@gmail.com>
Bug-Debian: 632546
Bug-Upstream: TS-868
Reviewed-by: Arno TÃ¶ll <debian@toell.net>

--- trafficserver-3.0.0.orig/mgmt/Makefile.am
+++ trafficserver-3.0.0/mgmt/Makefile.am
@@ -97,7 +97,7 @@
   $(top_builddir)/mgmt/tools/libinkconfigapi.a \
   $(top_builddir)/lib/ts/libtsutil.la \
   @LIBEXPAT@ @LIBPCRE@ \
-  @LIBSSL@ @LIBTCL@ @LIBICONV@ \
+  @LIBTCL@ @LIBICONV@ \
   -lm @LIBDL@ @LIBSOCKET@ @LIBNSL@ @LIBRESOLV@ \
   @LIBTHREAD@ @LIBRT@ @LIBEXECINFO@ @LIBCAP@
 
@@ -107,3 +107,5 @@
   $(top_builddir)/lib/wccp/libwccp.a \
   $(top_builddir)/lib/tsconfig/libtsconfig.la
 endif
+
+traffic_manager_LDADD += @LIBSSL@
--- trafficserver-3.0.0.orig/mgmt/Makefile.in
+++ trafficserver-3.0.0/mgmt/Makefile.in
@@ -546,9 +546,9 @@
 	$(top_builddir)/mgmt/tools/libinksysapi.a \
 	$(top_builddir)/mgmt/tools/libinkconfigapi.a \
 	$(top_builddir)/lib/ts/libtsutil.la @LIBEXPAT@ @LIBPCRE@ \
-	@LIBSSL@ @LIBTCL@ @LIBICONV@ -lm @LIBDL@ @LIBSOCKET@ @LIBNSL@ \
+	@LIBTCL@ @LIBICONV@ -lm @LIBDL@ @LIBSOCKET@ @LIBNSL@ \
 	@LIBRESOLV@ @LIBTHREAD@ @LIBRT@ @LIBEXECINFO@ @LIBCAP@ \
-	$(am__append_1)
+	$(am__append_1) @LIBSSL@
 all: all-recursive
 
 .SUFFIXES:
